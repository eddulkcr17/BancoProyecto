version: '3.8'
services:
     zookeeper:
       image: 'bitnami/zookeeper:latest'
       ports:
         - '2181:2181'
       environment:
         - ALLOW_ANONYMOUS_LOGIN=yes
   
     kafka:
       image: 'bitnami/kafka:latest'
       ports:
         - '9092:9092'
       environment:
         - KAFKA_BROKER_ID=1
         - KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092
         - KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://host.docker.internal:9092
         - KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
         - ALLOW_PLAINTEXT=yes
       depends_on:
         - zookeeper
   
     db:
       image: 'postgres:13'
       volumes:
         - 'db-data:/var/lib/postgresql/data'
       environment:
         - POSTGRES_USER=postgres
         - POSTGRES_PASSWORD=postgres
         - POSTGRES_DB=banco
       ports:
         - '5432:5432'
volumes:
     db-data: